<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<meta name="author" content="David Clark &amp; Christopher J. Stehno">
<title>Http Builder NG Users Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Http Builder NG Users Guide</h1>
<div class="details">
<span id="author" class="author">David Clark &amp; Christopher J. Stehno</span><br>
<span id="revnumber">version 0.12.0,</span>
<span id="revdate">December 2016</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_history">History</a></li>
<li><a href="#_license">License</a></li>
<li><a href="#_configuration">Configuration</a>
<ul class="sectlevel2">
<li><a href="#_authentication">Authentication</a>
<ul class="sectlevel3">
<li><a href="#_basic">BASIC</a></li>
<li><a href="#_digest">DIGEST</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_encoders">Encoders</a></li>
<li><a href="#_parsers">Parsers</a></li>
<li><a href="#_interceptors">Interceptors</a></li>
<li><a href="#_http_response_headers">HTTP Response Headers</a></li>
<li><a href="#_client_library_integration">Client Library Integration</a></li>
<li><a href="#_standard_java_usage">Standard Java Usage</a></li>
<li><a href="#_examples">Examples</a>
<ul class="sectlevel2">
<li><a href="#_resource_last_modified_head">Resource Last Modified (HEAD)</a></li>
<li><a href="#_scraping_web_content_get">Scraping Web Content (GET)</a></li>
<li><a href="#_sending_receiving_json_data_post">Sending/Receiving JSON Data (POST)</a></li>
<li><a href="#_sending_form_data_post">Sending Form Data (POST)</a></li>
<li><a href="#_sending_multipart_data_post">Sending Multipart Data (POST)</a></li>
</ul>
</li>
<li><a href="#_appendix_a_feature_support">Appendix A: Feature Support</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
As of version 0.11.0 the underlying Apache client implementation has been broken out into a separate sub-project dependent on the core library. The <code>ApacheHttpBuilder</code> package name and file location were changed and you will need to update your code to address this change.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://http-builder-ng.github.io/http-builder-ng/">HTTP Builder NG</a> project is a modern Groovy DSL for making HTTP requests. It is usable with both
Groovy and Java. It requires Java 8 and a modern version of Groovy. It is built against Groovy 2.4.x, but it doesn&#8217;t make any assumptions about which
version of Groovy you are using. The main goal of HTTP Builder NG is to allow you to make HTTP requests in a natural and readable way.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_history">History</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Http Builder NG was forked from the HTTPBuilder project originally developed by Thomas Nichols. It was later passed on to
<a href="https://github.com/jgritman/httpbuilder">Jason Gritman</a> who maintained it for several years.</p>
</div>
<div class="paragraph">
<p>The original intent of Http Builder NG was to fix a few bugs and add a slight enhancement to the original HTTPBuilder project. The slight enhancement
was to make HTTPBuilder conform to more modern Groovy DSL designs; however, it was not possible to update the original code to have a more modern
typesafe DSL while preserving backwards compatibility. I decided to just make a clean break and give the project a new name to make it clear that HTTP
Builder NG is basically a complete re-write and re-architecture.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_license">License</h2>
<div class="sectionbody">
<div class="paragraph">
<p>HTTP Builder NG is licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2</a> open source license.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Copyright 2016 David Clark

Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The specific configuration options are discussed in the JavaDocs for the <code><a href="https://http-builder-ng.github.io/http-builder-ng/core/javadoc/groovyx/net/http/HttpBuilder.html">HttpBuilder</a></code>,
<code><a href="https://http-builder-ng.github.io/http-builder-ng/core/javadoc/groovyx/net/http/HttpConfig.html">HttpConfig</a></code> and
<code><a href="https://http-builder-ng.github.io/http-builder-ng/core/javadoc/groovyx/net/http/HttpObjectConfig.html">HttpObjectConfig</a></code> interfaces.</p>
</div>
<div class="paragraph">
<p>There are three underlying client implementations, the default "core" implementation based on the core Java <code>HttpURLConnection</code> class, an implementation
 based on the <a href="http://hc.apache.org/httpcomponents-client-ga/">Apache HttpComponents</a> client, and an implementation based on the <a href="http://square.github.io/okhttp/">OkHttp</a>
 client library.</p>
</div>
<div class="paragraph">
<p>The selection of a client implementation is specified using a factory function when configuring your <code>HttpBuilder</code> instance. For the default <code>HttpURLConnection</code>
-based implementation use the <code>configure</code> methods without a factory <code>Function</code> or specify the desired client function, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">HttpBuilder.configure()</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">HttpBuilder.configure({ c -&gt; <span class="keyword">new</span> JavaHttpBuilder(c) })</code></pre>
</div>
</div>
<div class="paragraph">
<p>For the Apache-based builder, you would use the <code>ApacheHttpBuilder</code> in the factory, as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">HttpBuilder.configure({ c -&gt; <span class="keyword">new</span> ApacheHttpBuilder(c) })</code></pre>
</div>
</div>
<div class="paragraph">
<p>Assuming, of course, that you have configured the <code>http-builder-ng-apache</code> dependency in your project.</p>
</div>
<div class="paragraph">
<p>Alternately, each of the client implementations provides their own <code>configure</code> methods using themselves as the factory, for the Apache client, you
would use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">HttpBuilder http = ApacheHttpBuilder.configure {
    <span class="comment">// configuration...</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that the <code>configure</code> method is called on the <code>ApacheHttpBuilder</code> rather than the core <code>HttpBuilder</code> class. This allows a simpler configuration
of the client factory to be used.</p>
</div>
<div class="sect2">
<h3 id="_authentication">Authentication</h3>
<div class="paragraph">
<p>There are two methods of authentication supported: BASIC and DIGEST.</p>
</div>
<div class="sect3">
<h4 id="_basic">BASIC</h4>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/Basic_access_authentication">BASIC Authentication</a> is supported via the <code>HttpConfig.Request.Auth</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> http = HttpBuilder.configure {
    request.uri = <span class="string"><span class="delimiter">'</span><span class="content">http://localhost:10101</span><span class="delimiter">'</span></span>
    request.auth.basic <span class="string"><span class="delimiter">'</span><span class="content">admin</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">myp@$$w0rd</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is nothing more to do on the client side.</p>
</div>
</div>
<div class="sect3">
<h4 id="_digest">DIGEST</h4>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/Digest_access_authentication">DIGEST Authentication</a> is supported via the <code>HttpConfig.Request.Auth</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> http = HttpBuilder.configure {
    request.uri = <span class="string"><span class="delimiter">'</span><span class="content">http://localhost:10101</span><span class="delimiter">'</span></span>
    request.auth.digest <span class="string"><span class="delimiter">'</span><span class="content">admin</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">myp@$$w0rd</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is nothing more to do on the client side.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Currently there are some support issues with DIGEST and it&#8217;s support may be removed altogether.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_encoders">Encoders</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Content encoders are used to convert request body content to a different format before handing off to the underlying HTTP client. An encoder is implemented as a
<code>java.util.function.BiConsumer&lt;ChainedHttpConfig,ToServer&gt;</code> function where the provided implementation of the <code>ToServer</code> provides the data. See the <code>toServer(InputStream)</code>
method.</p>
</div>
<div class="paragraph">
<p>Encoders are provided in the request configuration (<code>HttpConfig.Request.encoder(String,BiConsumer&lt;ChainedHttpConfig,ToServer&gt;)</code>) mapped to a content type that they should be
used to handle. Say we wanted to be able to send <code>Date</code> objects to the server in a specific format as the request body:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">HttpBuilder.configure {
    request.uri = <span class="string"><span class="delimiter">'</span><span class="content">http://locahost:1234/schedule</span><span class="delimiter">'</span></span>
    request.body = <span class="keyword">new</span> <span class="predefined-type">Date</span>()
    request.contentType = <span class="string"><span class="delimiter">'</span><span class="content">text/date-time</span><span class="delimiter">'</span></span>
    request.encoder(<span class="string"><span class="delimiter">'</span><span class="content">text/date-time</span><span class="delimiter">'</span></span>){ ChainedHttpConfig config, ToServer req-&gt;
        req.toServer(<span class="keyword">new</span> <span class="predefined-type">ByteArrayInputStream</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">DATE-TIME: </span><span class="inline"><span class="inline-delimiter">${</span>config.request.body.format(<span class="string"><span class="delimiter">'</span><span class="content">yyyyMMdd.HHmm</span><span class="delimiter">'</span></span>)<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span>.bytes))
    }
}.post()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that a Groovy <code>Closure</code> is usable as a <code>BiConsumer</code> function. The <code>Date</code> object in the request is formatted as String, converted to bytes and pushed to the request
<code>InputStream</code>.</p>
</div>
<div class="paragraph">
<p>Default encoders are provided for: CSV, JSON and TEXT content.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_parsers">Parsers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The response body content resulting form a request is parsed based on the response content type. Content parsers may be configured using the
<code>HttpConfig.Response.parser(String, BiFunction&lt;ChainedHttpConfig, FromServer, Object&gt;)</code> method, which takes a <code>BiFunction</code> and the response content type it is mapped to. The function (or Closure)
accepts a <code>ChainedHttpConfig</code> object, and a <code>FromServer</code> instance and returns the parsed <code>Object</code>. If we had a server providing the current time as a response like <code>DATE-TIME: MM/dd/yyyy HH:mm:ss</code>
we could request the time with the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">Date</span> date = HttpBuilder.configure {
    request.uri = <span class="string"><span class="delimiter">'</span><span class="content">http://localhost:1234/currenttime</span><span class="delimiter">'</span></span>
}.get(<span class="predefined-type">Date</span>){
    response.parser(<span class="string"><span class="delimiter">'</span><span class="content">text/date-time</span><span class="delimiter">'</span></span>){ ChainedHttpConfig cfg, FromServer fs, <span class="predefined-type">Object</span> obj-&gt;
        <span class="predefined-type">Date</span>.parse(<span class="string"><span class="delimiter">'</span><span class="content">MM/dd/yyyy HH:mm:ss</span><span class="delimiter">'</span></span>, fs.inputStream.text)
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>which would parse the incoming response and convert it to a <code>Date</code> object.</p>
</div>
<div class="paragraph">
<p>Default parsers are provided for: HTML (<code>org.jsoup.nodes.Document</code>), JSON (Groovy JSON map), XML (<code>org.w3c.dom.Document</code>) and TEXT (String).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_interceptors">Interceptors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>HttpObjectConfig</code> (used in the <code>configure()</code> method, allows the configuration of global request/response
interceptors, which can perform operations before and after every request/response on the client. For example,
if you wanted to make a POST request and return only the time elapsed during the request/response handling, you
could do something like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">long</span> elapsed = configure {
    request.uri = <span class="string"><span class="delimiter">'</span><span class="content">https://mvnrepository.com/artifact/org.codehaus.groovy/groovy-all</span><span class="delimiter">'</span></span>
    execution.interceptor(GET) { cfg, fx -&gt;
        <span class="type">long</span> started = <span class="predefined-type">System</span>.currentTimeMillis()
        fx.apply(cfg)
        <span class="predefined-type">System</span>.currentTimeMillis() - started
    }
}.get(<span class="predefined-type">Long</span>, NO_OP)

println <span class="string"><span class="delimiter">&quot;</span><span class="content">Elapsed time for request: </span><span class="inline"><span class="inline-delimiter">$</span>elapsed</span><span class="content"> ms</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This interceptor on the GET requests will calculate the time spent in the actual request handling (the
call to <code>fx.apply(cfg)</code> and return the elapsed time as the result of the request (ignoring the actual
response content from the server). The displayed result will be something like:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Elapsed time for request: 865 ms</pre>
</div>
</div>
<div class="paragraph">
<p>Using interceptors you can also modify the data before and after the <code>apply()</code> method is called.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_http_response_headers">HTTP Response Headers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>HTTP headers are retrieved from the response using the <code>FromServer.getHeaders()</code> method. Some common headers enriched with the ability to parse themselves into
more useful types, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">headers.find { h-&gt; h.key == <span class="string"><span class="delimiter">'</span><span class="content">Last-Modified</span><span class="delimiter">'</span></span> }.parse()   <span class="comment">// ZonedDateTime</span>
headers.find { h-&gt; h.key == <span class="string"><span class="delimiter">'</span><span class="content">Allow</span><span class="delimiter">'</span></span> }.parse()           <span class="comment">// List&lt;String&gt;</span>
headers.find { h-&gt; h.key == <span class="string"><span class="delimiter">'</span><span class="content">Refresh</span><span class="delimiter">'</span></span> }.parse()         <span class="comment">// Map&lt;String,String&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The parsing is provided using registered header implementations by header name. Currently, you cannot register your own and the supported header types are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Access-Control-Allow-Origin</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>Accept-Patch</code>&#8594; CombinedMap</p>
</li>
<li>
<p><code>Accept-Ranges</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>Age</code>&#8594; SingleLong</p>
</li>
<li>
<p><code>Allow</code>&#8594; CsvList</p>
</li>
<li>
<p><code>Alt-Svc</code>&#8594; MapPairs</p>
</li>
<li>
<p><code>Cache-Control</code>&#8594; MapPairs</p>
</li>
<li>
<p><code>Connection</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>Content-Disposition</code>&#8594; CombinedMap</p>
</li>
<li>
<p><code>Content-Encoding</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>Content-Language</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>Content-Length</code>&#8594; SingleLong</p>
</li>
<li>
<p><code>Content-Location</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>Content-MD5</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>Content-Range</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>Content-Type</code>&#8594; CombinedMap</p>
</li>
<li>
<p><code>Date</code>&#8594; HttpDate</p>
</li>
<li>
<p><code>ETag</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>Expires</code>&#8594; HttpDate</p>
</li>
<li>
<p><code>Last-Modified</code>&#8594; HttpDate</p>
</li>
<li>
<p><code>Link</code>&#8594; CombinedMap</p>
</li>
<li>
<p><code>Location</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>P3P</code>&#8594; MapPairs</p>
</li>
<li>
<p><code>Pragma</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>Proxy-Authenticate</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>Public-Key-Pins</code>&#8594; MapPairs</p>
</li>
<li>
<p><code>Refresh</code>&#8594; CombinedMap</p>
</li>
<li>
<p><code>Retry-After</code>&#8594; HttpDate</p>
</li>
<li>
<p><code>Server</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>Set-Cookie</code>&#8594; MapPairs</p>
</li>
<li>
<p><code>Status</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>Strict-Transport-Security</code>&#8594; MapPairs</p>
</li>
<li>
<p><code>Trailer</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>Transfer-Encoding</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>TSV</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>Upgrade</code>&#8594; CsvList</p>
</li>
<li>
<p><code>Vary</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>Via</code>&#8594; CsvList</p>
</li>
<li>
<p><code>Warning</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>WWW-Authenticate</code>&#8594; ValueOnly</p>
</li>
<li>
<p><code>X-Frame-Options</code>&#8594; ValueOnly</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All headers not explicitly typed are simply <code>ValueOnly</code>. The definitive list is in the source code of the <code>groovyx.net.http.FromServer.Header</code> class.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_client_library_integration">Client Library Integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Currently the HTTP Builder NG library has three HTTP client implementations, one based on the <code>HttpURLConnection</code> class, another based on the Apache Http
Components and the third based on OkHttp; however, there is no reason other HTTP clients could not be used, perhaps the
<a href="https://github.com/google/google-http-java-client">Google HTTP Java Client</a> if needed.</p>
</div>
<div class="paragraph">
<p>A client implementation is an extension of the abstract <code>HttpBuilder</code> class, which must implement a handful of abstract methods for the handling the HTTP verbs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">protected</span> <span class="directive">abstract</span> <span class="predefined-type">Object</span> doGet(<span class="directive">final</span> ChainedHttpConfig config);
<span class="directive">protected</span> <span class="directive">abstract</span> <span class="predefined-type">Object</span> doHead(<span class="directive">final</span> ChainedHttpConfig config);
<span class="directive">protected</span> <span class="directive">abstract</span> <span class="predefined-type">Object</span> doPost(<span class="directive">final</span> ChainedHttpConfig config);
<span class="directive">protected</span> <span class="directive">abstract</span> <span class="predefined-type">Object</span> doPut(<span class="directive">final</span> ChainedHttpConfig config);
<span class="directive">protected</span> <span class="directive">abstract</span> <span class="predefined-type">Object</span> doDelete(<span class="directive">final</span> ChainedHttpConfig config);</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is also an abstract method for retrieving the client configuration, though generally this will be a simple getter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">protected</span> <span class="directive">abstract</span> ChainedHttpConfig getObjectConfig();</code></pre>
</div>
</div>
<div class="paragraph">
<p>And finally a method to retrieve the threading interface, again this is generally a getter for the configured thread executor.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">public</span> <span class="directive">abstract</span> <span class="predefined-type">Executor</span> getExecutor();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the abstract contract is satisfied, you can use the new client just as the others, with your client in the factory function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">HttpBuilder.configure({ c -&gt; <span class="keyword">new</span> GoogleHttpBuilder(c); } <span class="keyword">as</span> Function){
    request.uri = <span class="string"><span class="delimiter">'</span><span class="content">http://localhost:10101/foo</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The client extensions will reside in their own sub-projects that in turn depend on the core library. This allows the clients to have code and dependency
isolation from other implementations and minimizes unused dependencies in projects using the library.</p>
</div>
<div class="paragraph">
<p>If you come up with something generally useful, feel free to create a pull request and we may be able to bring it into the project.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_standard_java_usage">Standard Java Usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>HttpBuilder</code> may also be used in standard Java 8 code with no required Groovy code. For example, extracting the HTTP headers from the result of a
<code>HEAD</code> request would be something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">HttpBuilder http = HttpBuilder.configure(config -&gt; {
    config.getRequest().setUri(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://localhost:9192</span><span class="delimiter">&quot;</span></span>);
});

<span class="predefined-type">List</span>&lt;FromServer.Header&gt; headers = (<span class="predefined-type">List</span>&lt;FromServer.Header&gt;) http.head(<span class="predefined-type">List</span>.class, config -&gt; {
    config.getRequest().getUri().setPath(<span class="string"><span class="delimiter">&quot;</span><span class="content">/foo</span><span class="delimiter">&quot;</span></span>);
    config.getResponse().success(<span class="keyword">new</span> BiFunction&lt;FromServer, <span class="predefined-type">Object</span>, <span class="predefined-type">Object</span>&gt;() {
        <span class="annotation">@Override</span>
        <span class="directive">public</span> <span class="predefined-type">Object</span> apply(<span class="directive">final</span> FromServer from, <span class="directive">final</span> <span class="predefined-type">Object</span> o) {
            assertFalse(from.getHasBody());
            <span class="keyword">return</span> from.getHeaders();
        }
    });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Java 8 lambda expressions and function objects may be used interchangeably. All configuration and verb interfaces should be usable by both Groovy and Java code.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples">Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section contains some stand-alone examples of how you can use <code>HttpBuilder</code>. There are unit test versions for most of these examples. See the
<code>ExamplesSpec.groovy</code> file for more details.</p>
</div>
<div class="sect2">
<h3 id="_resource_last_modified_head">Resource Last Modified (HEAD)</h3>
<div class="paragraph">
<p>Suppose you want to see when the last time a jar in the public Maven repository was updated. Assuming the server is exposing the correct date, you can
use the <code>Last-Modified</code> header for the resource to figure out the date. A <code>HEAD</code> request works nicely for this, since you don&#8217;t care about the actual
file content at this time, you just want the header information. <code>HttpBuilder</code> makes this easy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">String</span> uri = <span class="string"><span class="delimiter">'</span><span class="content">http://central.maven.org/maven2/org/codehaus/groovy/groovy-all/2.4.7/groovy-all-2.4.7.jar</span><span class="delimiter">'</span></span>
<span class="predefined-type">Date</span> lastModified = configure {
    request.uri = uri
}.head(<span class="predefined-type">Date</span>) {
    response.success { FromServer resp -&gt;
        <span class="predefined-type">String</span> value = FromServer.Header.find(
            resp.headers,
            <span class="string"><span class="delimiter">'</span><span class="content">Last-Modified</span><span class="delimiter">'</span></span>
        )?.value
        value ? <span class="predefined-type">Date</span>.parse(
            <span class="string"><span class="delimiter">'</span><span class="content">EEE, dd MMM yyyy  H:mm:ss zzz</span><span class="delimiter">'</span></span>,
            value
        ) : <span class="predefined-constant">null</span>
    }
}

println <span class="string"><span class="delimiter">&quot;</span><span class="content">Groovy 2.4.7 last modified </span><span class="inline"><span class="inline-delimiter">${</span>lastModified.format(<span class="string"><span class="delimiter">'</span><span class="content">MM/dd/yyyy HH:mm</span><span class="delimiter">'</span></span>)<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example we use the URL for the Groovy 2.4.7 jar file from the Maven Central Repository and execute a <code>HEAD</code> request on it and extract the
<code>Last-Modified</code> header and convert it to a <code>java.util.Date</code> object and return it as the result. We end up with a resulting output line something like:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Groovy 2.4.7 last modified 06/07/2016 03:38</pre>
</div>
</div>
<div class="paragraph">
<p>Alternately, using header parsing along with the <code>java.time</code> API, you can simplify the header conversion:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">ZonedDateTime lastModified = configure {
    request.uri = <span class="string"><span class="delimiter">'</span><span class="content">http://central.maven.org/maven2/org/codehaus/groovy/groovy-all/2.4.7/groovy-all-2.4.7.jar</span><span class="delimiter">'</span></span>
}.head(ZonedDateTime) {
    response.success { FromServer resp -&gt;
        resp.headers.find { h-&gt; h.key == <span class="string"><span class="delimiter">'</span><span class="content">Last-Modified</span><span class="delimiter">'</span></span> }?.parse(ofPattern(<span class="string"><span class="delimiter">'</span><span class="content">EEE, dd MMM yyyy  H:mm:ss zzz</span><span class="delimiter">'</span></span>))
    }
}

println <span class="string"><span class="delimiter">&quot;</span><span class="content">Groovy 2.4.7 (jar) was last modified on </span><span class="inline"><span class="inline-delimiter">${</span>lastModified.format(ofPattern(<span class="string"><span class="delimiter">'</span><span class="content">MM/dd/yyyy HH:mm</span><span class="delimiter">'</span></span>))<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>which yields the same results, just with a cleaner conversion of the header data.</p>
</div>
</div>
<div class="sect2">
<h3 id="_scraping_web_content_get">Scraping Web Content (GET)</h3>
<div class="paragraph">
<p>Scraping content from web sites doesn&#8217;t seem to be a prevalent as it was years ago, but it&#8217;s a lot easier than it used to be. By default, <code>text/html</code>
content is parsed with the <a href="https://jsoup.org/">JSoup</a> HTML parser into a <code>Document</code> object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">Document</span> page = configure {
    request.uri = <span class="string"><span class="delimiter">'</span><span class="content">https://mvnrepository.com/artifact/org.codehaus.groovy/groovy-all</span><span class="delimiter">'</span></span>
}.get()

<span class="predefined-type">String</span> license = page.select(<span class="string"><span class="delimiter">'</span><span class="content">span.b.lic</span><span class="delimiter">'</span></span>).collect { <span class="local-variable">it</span>.text() }.join(<span class="string"><span class="delimiter">'</span><span class="content">, </span><span class="delimiter">'</span></span>)

println <span class="string"><span class="delimiter">&quot;</span><span class="content">Groovy is licensed under: </span><span class="inline"><span class="inline-delimiter">${</span>license<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example we make a <code>GET</code> request to the a secondary Maven repository to fetch the main entry page for the <code>groovy-all</code> artifact, which has the
license information on it. The page is returned and parsed into a JSoup <code>Document</code> which we can then run a CSS selection query on to extract the
license information and display it. You will end up with:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Groovy is licensed under: Apache 2.0</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sending_receiving_json_data_post">Sending/Receiving JSON Data (POST)</h3>
<div class="paragraph">
<p>Posting JSON content to the server and parsing the response body to build an object from it is pretty common in RESTful interfaces. You can do this by creating
a POST request with a "Content-Type" of <code>application/json</code> and a custom response parser:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">ItemScore itemScore = configure {
    request.uri = <span class="string"><span class="delimiter">'</span><span class="content">http://httpbin.org</span><span class="delimiter">'</span></span>
    request.contentType = JSON[<span class="integer">0</span>]
    response.parser(JSON[<span class="integer">0</span>]) { config, resp -&gt;
        <span class="keyword">new</span> ItemScore(NativeHandlers.Parsers.json(config, resp).json)
    }
}.post(ItemScore) {
    request.uri.path = <span class="string"><span class="delimiter">'</span><span class="content">/post</span><span class="delimiter">'</span></span>
    request.body = <span class="keyword">new</span> ItemScore(<span class="string"><span class="delimiter">'</span><span class="content">ASDFASEACV235</span><span class="delimiter">'</span></span>, <span class="integer">90786</span>)
}

println <span class="string"><span class="delimiter">&quot;</span><span class="content">Your score for item (</span><span class="inline"><span class="inline-delimiter">${</span>itemScore.item<span class="inline-delimiter">}</span></span><span class="content">) was (</span><span class="inline"><span class="inline-delimiter">${</span>itemScore.score<span class="inline-delimiter">}</span></span><span class="content">).</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The custom response parser is needed to convert the parsed JSON data into your expected response data object. By default, the <code>application/json</code> response
content type will be parsed to a JSON object (lazy map); however, in this case we want the response to be an instance of the <code>ItemScore</code> class. The example
simply posts an <code>ItemScore</code> object (as a JSON string) to the server, which responds with the JSON string that it was provided.</p>
</div>
<div class="paragraph">
<p>The additional <code>.json</code> property call on the parsed data is to extract the JSON data from the response envelope - the site provides other useful information about
the request. The end result is the following display:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Your score for item (ASDFASEACV235) was (90786).</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sending_form_data_post">Sending Form Data (POST)</h3>
<div class="paragraph">
<p>Posting HTML form data is a common <code>POST</code> operation, and it is supported by <code>HttpBuilder</code> with a custom encoder, such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">HttpBuilder.configure {
    request.uri = <span class="string"><span class="delimiter">'</span><span class="content">http://example.com</span><span class="delimiter">'</span></span>
}.post {
    request.uri.path = <span class="string"><span class="delimiter">'</span><span class="content">/some/form</span><span class="delimiter">'</span></span>
    request.body = [<span class="key">id</span>: <span class="string"><span class="delimiter">'</span><span class="content">234545</span><span class="delimiter">'</span></span>, <span class="key">label</span>: <span class="string"><span class="delimiter">'</span><span class="content">something interesting</span><span class="delimiter">'</span></span>]
    request.contentType = <span class="string"><span class="delimiter">'</span><span class="content">application/x-www-form-urlencoded</span><span class="delimiter">'</span></span>
    request.encoder <span class="string"><span class="delimiter">'</span><span class="content">application/x-www-form-urlencoded</span><span class="delimiter">'</span></span>, NativeHandlers.Encoders.&amp;form
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>which would <code>POST</code> the specified body data map as urlencoded data to the server. The key here is the use of the <code>NativeHandlers.Encoders.&amp;form</code>
encoder, which converts the provided map data into the encoded message before sending it to the server.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sending_multipart_data_post">Sending Multipart Data (POST)</h3>
<div class="paragraph">
<p><code>HttpBuilder</code> supports multipart request content such as file uploads, with either the generic <code>MultipartEncoder</code> or one of the client-specific
encoders. For example, the <code>OkHttpBuilder</code> could use the <code>OkHttpEncoders.&amp;multipart</code> encoder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">File</span> someFile = <span class="comment">// ...</span>

OkHttpBuilder.configure {
    request.uri = <span class="string"><span class="delimiter">'</span><span class="content">http://example.com</span><span class="delimiter">'</span></span>
}.post {
    request.uri.path = <span class="string"><span class="delimiter">'</span><span class="content">/upload</span><span class="delimiter">'</span></span>
    request.contentType = <span class="string"><span class="delimiter">'</span><span class="content">multipart/form-data</span><span class="delimiter">'</span></span>
    request.body = multipart {
        field <span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">This is my file</span><span class="delimiter">'</span></span>
        part <span class="string"><span class="delimiter">'</span><span class="content">file</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">myfile.txt</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">text/plain</span><span class="delimiter">'</span></span>, someFile
    }
    request.encoder <span class="string"><span class="delimiter">'</span><span class="content">multipart/form-data</span><span class="delimiter">'</span></span>, OkHttpEncoders.&amp;multipart
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>which would <code>POST</code> the content of the file, <code>someFile</code> along with the specified <code>name</code> field to the server as a <code>multipart/form-data</code> request. The
important parts of the example are the <code>multipart</code> DSL extension, which is provided by the <code>MultipartContent</code> class and aids in creating the upload
content in the correct format. The multipart encoder is used to convert the request content into the multipart message format expected by a server.
Notice that the encoder is specific to the <code>OkHttpBuilder</code>, which we are using in this case.</p>
</div>
<div class="paragraph">
<p>The available multipart encoders:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>groovyx.net.http.MultipartEncoder</code> - a generic minimalistic multipart encoder for use with the core Java client or any of the others.</p>
</li>
<li>
<p><code>groovyx.net.http.OkHttpEncoders::multipart</code> - the encoder using OkHttp-specific multipart encoding.</p>
</li>
<li>
<p><code>groovyx.net.http.ApacheEncoders::multipart</code> - the encoder using Apache client specific multipart encoding.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The encoding of the parts is done using the encoders configured on the <code>HttpBuilder</code> executing the request. Any encoders required to encode the parts
of a multipart content object must be specified beforehand.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix_a_feature_support">Appendix A: Feature Support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The goal is to support all features across all client implementations; however, due to the nature of the client implemeatations, this is not always
possible. The table below contains general feature support information per client implementation.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Feature Support Matrix</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BASIC</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DIGEST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multipart</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compression</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apache</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OkHttp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">N</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.12.0<br>
Last updated 2016-12-26 06:49:00 -06:00
</div>
</div>
</body>
</html>